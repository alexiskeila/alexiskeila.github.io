<script src="../lib/tracery.js"></script>
<script src="../lib/mousetrap.min.js"></script>
<script src="../lib/jquery-1.11.1.min.js"></script>
<h1>Compose Sestina</h1>
<button onclick="generate()">New Line</button>
<script>
var baseGramm = [["#lineA#", "#lineB#", "#lineC#", "#lineD#", "#lineE#", "#lineF#"], 
					["#lineF#", "#lineA#", "#lineE#", "#lineB#", "#lineD#", "#lineC#"],
					["#lineC#", "#lineF#", "#lineD#", "#lineA#", "#lineB#", "#lineE#"],
					["#lineE#", "#lineC#", "#lineB#", "#lineF#", "#lineA#", "#lineD#"],
					["#lineD#", "#lineE#", "#lineA#", "#lineC#", "#lineF#", "#lineB#"],
					["#lineB#", "#lineD#", "#lineF#", "#lineE#", "#lineC#", "#lineA#"]];
var grammarObj = {
	"origin"  : ["#[wordA:#wordAwords#][wordB:#wordBwords#][wordC:#wordCwords#][wordD:#wordDwords#][WordE:#WordEwords#][wordF:#wordFwords#]Sestina#"], 
	"Sestina" : ["#stanza1#" + "#stanza2#" + "#stanza3#" + "#stanza4#" + "#stanza5#" + "#stanza6#"],
	"stanza1" : ["#lineA#<br>" + "#lineB#<br>" + "#lineC#<br>" + "#lineD#<br>" + "#lineE#<br>" + "#lineF#<br><br>"], 
	"stanza2" : ["#lineF#<br>" + "#lineA#<br>" + "#lineE#<br>" + "#lineB#<br>" + "#lineD#<br>" + "#lineC#<br><br>"], 
	"stanza3" : ["#lineC#<br>" + "#lineF#<br>" + "#lineD#<br>"+ "#lineA#<br>" + "#lineB#<br>" + "#lineE#<br><br>"], 
	"stanza4" : ["#lineE#<br>"+ "#lineC#<br>" + "#lineB#<br>" + "#lineF#<br>" + "#lineA#<br>" + "#lineD#<br><br>"], 
	"stanza5" : ["#lineD#<br>" + "#lineE#<br>" + "#lineA#<br>" + "#lineC#<br>" + "#lineF#<br>" + "#lineB#<br><br>"], 
	"stanza6" : ["#lineB#<br>" + "#lineD#<br>" + "#lineF#<br>" + "#lineE#<br>" + "#lineC#<br>" + "#lineA#<br><br>"], 
	"lineA" :["September rain falls on the #wordA#", "He stood for a minute alone in the #wordA", "Hearing of harvests rotting in the #wordA#", "And I love to see the sun rise in the #wordA#", "Dawn came back and they were still in the #wordA#", "I so vividly remember the devsatating conditions of the #wordA#", "As fortune had it, I was bright as the #wordA#", "That brought them desperate to the brink of the #wordA#", "Every day was dancing in the #wordA#", "Now is the time to leave your wretched #wordA#", "So many, wretched, would not leave their #wordA#", "Nymphs which haunt the springs in the pleasant #wordA#", "Of huge despair, and foul affliction\’s #wordA#", "That was once the music of the #wordA#", "When I do smell the flowers of the #wordA#", "They reined their violent horses on the #wordA#", "The shadow cast across your lives by the #wordA#", "Heavenly huntress of the savage #wordA#", "With envy I do hate the lofty #wordA#", "Knowing them shipwrecked who were launched for the #wordA#", "Each in his little bed conceived of the #wordA#", "Some waving pilgrims were describing the #wordA#", "\'The gods,\' they promised, \'visit us from the #wordA#\'", "Climbing up crags to get a view of the #wordA#", "And we rebuild our cities, not dream of the #wordA#", "the way the rain must dance on the #wordA#", "She shivers and says she thinks of the #wordA#", "With crayons the child draws a rigid #wordA#", "The child draws another inscrutable #wordA#", "What under the sun was he trying to do, up there on his #wordA#!", "At breakfast time I sit on my #wordA#", "As if the miracle were working, on the wrong #wordA#", "When the colour is all lost from the #wordA#", "By the sweet season that warms all the #wordA#", "Makes them alter from pure white to #wordA#", "It\'s like a book, I think, this bloomin\' #wordA#", "The happy roads that take you over the #wordA#", "Birds nest along the #wordA#", "through ages, by insects, birds, and the #wordA#", "Hunting the wild inhabiters of the #wordA#", "Long since my thoughts more desert be than #wordA#", "Long since my thoughts chase me like beasts in a #wordA#", "The dreadful cries of murdered men in #wordA#", "My fire is more than can be made by the #wordA#", "With gold coins and spilled blood and highly operatic #wordA#", "\“Angel Eyes\” drops like a solitary crow circling the endless #wordA#", "A time to climb every available #wordA#", "Waiting to see the start is a chore, like a narrow #wordA#"],
	"lineB" :["I give money to every beggar I see, smile at every #wordB#", "To the short day and to the loving #wordB#", "I knew I was blushing like a winsome #wordB#", "Only known to a #wordB#", "After that happened, I\'d a vision of my #wordB#", "A Belfast accent was sweet talk to  my #wordB#", "his head, so to speak, in the clouds, along with the #wordB#", "A beautiful villa stood beside the #wordB#", "And likewise this heaven born #wordB#", "She draws the mind from any other #wordB#", "I have travelled, through the plains and hills, to find my release from the #wordB#", "As much in love as ever yet was #wordB#", "The wood, so soft and green, takes fire, as might the lovely #wordB#", "With her sweet grin, the lovely #wordB#", "Doomed to rot a #wordB#", "Handing him the miracle was the responsibility of the #wordB#"],
	"lineC" : ["We will talk and eat and forget about the #wordC#","By the time we leave, it will, indeed, be #wordC#", "Among soft leaves that give the starlight an air of a wonderful #wordC#", "In the stories we tell ourselves to ward off this #wordC#", "But will optimism, an imagined heat, keep us warm come #wordC#?", "There was still gold and silver in the #wordC#", "I saw my soul at rest upon a #wordC#", "It had no power of joy to fly in the #wordC#", "A world\'s not wholly known through #wordC#", "But in the full face of the fire of #wordC#", "And sought no strength nor knowledge of the #wordC#", "Between the rise and rest of #wordC#", "Dancing in the valleys, I found the #wordC#", "As a bird sleeping in the nest of #wordC#", "Had all its will of dreams and pleasant #wordC#", "All loves and dreams and sounds and gleams of #wordC#", "Watched as a nursling of the large-eyed #wordC#", "They built by rivers and the water in the #wordC#", "Long since I hate the #wordC#", "I do detest the #wordC#"],
	"lineD" : ["We will toast #wordD#", "Ironic that this colonial city is so hard on pedestrians\: where\’s the #wordD#", "To touch its wings but not its eyes with #wordD#", "Though my desire will not lose its #wordD#", "And it pries wide my mouth with fast #wordD#", "But hunger was a more immediate #wordD#", "Road, the high road that sometimes, maybe, leads to #wordD#", "Sometimes I think there’s no such thing: no #wordD#", "I spent four fond months sipping #wordD#", "My thinking was tempered by world class #wordD#", "The light fare is complemented by more #wordD#", "Another day is spent with modern #wordD#", "Americans wonder if Pablo had too much #wordD#", "It definitely looks nothing like #wordD#", "And the fierce thunders roar me their #wordD#", "With fat boards, bawds, wine and frail #wordD#", "Yea, I fill all the air with my #wordD#", "The swords make crimson with the power of their #wordD#", "Vouchsafe your silent ears to plaining #wordD#", "Fill the vales with cries instead of #wordD#", "The nightingales do learn of owls their #wordD#", "I curse the fiddling finders-out of #wordD#", "And stop my ears, lest I grow mad with #wordD#", "These forests are made wretched by our #wordD#", "When the tempests kill the earth\'s foul #wordD#", "Better one hour\'s stour than a year\'s #wordD#", "May God damn for ever all who cry \"#wordD#!\"", "Hell blot black for always the thought \"#wordD#!\"", "Some of us stood around, waiting for the #wordD#", "I can tell what I saw next; it was not #wordD#", "This was the measure of my soul\'s #wordD#", "It might not have to feed its faint #wordD#", "But be this place of pain or of #wordD#", "Sing while he may, man hath no long #wordD#", "Nor part in the large lordship of the #wordD#", " #wordD#", "Shut up with green leaves and a little #wordD#", "What place shall be for any starry #wordD#", "Have thy day and take thy fill of #wordD#", "Whose honour is the image of our #wordD#", "Which cannot see its likeness in their #wordD#", "Sitting at their white sides, forget your #wordD#", "So many, fearful, took with them their #wordD#", "It is our #wordD#"],
	"lineE" : ["Winter is a time for #WordE#", "I feel the weather in my #WordE", "There’s something red in my #WordE#", "So rooted is it in this hardest #WordE#", "When I see him so scorn and defy #WordE#", "In inconsistency, I’ve found my #WordE#", "And knew not as men waking, of #WordE#", "Laughing and talking to hide the #WordE#", "Thinking deeply of that equinoctial #WordE#", "A man flaunts trousers with buttons like #WordE#", "Time to plant #WordE#", "Waiting for coffee and the charitable #WordE#", "Each man received one #WordE#", "I saw it with one eye close to the #WordE#", "We licked up the #WordE#", "At six o\'clock we were waiting for #WordE#", "And from the doors came the smell of #WordE#", "I had to swallow the #WordE#", "It was unmoved, or moved like #WordE#", "Her beauty has more virtue than #WordE#", "She would have sparked love in a #WordE#", "It\'s raining on black coal and warm wet #WordE#", "It will blow the station to dust and #WordE#", "Her shopping bags full up with shovelled #WordE#", "Listen to the rain spit in new #WordE#", "The teacup was full of dark brown #WordE#"],
	"lineF" : ["But the color cannot always be #wordF#", "Liquor that makes me #wordF#", "That speak and feels as though it were #wordF#", "His lone might \'gainst all that is #wordF#", "The deliverance was intelligible, though #wordF#", "The speech was slightly impeded, largely #wordF#", "After all those hours, I yet remained half #wordF#", "Though my desire will not lose its #wordF#", "Altered from pure to #wordF#", "She blends her gold hair with things mostly #wordF#", "In general, I have found them #wordF#", "The ripple in the river was steadied and #wordF#", "Unless you lived your life entirely #wordF#"],
	"wordAwords" : ["west", "valley", "mountain", "island", "house", "city", "balcony", "hill", "grass", "world", "ashes", "river", "forest", "desert", "Motherland"],
	"wordBwords" : ["mother", "grandmother", "child", "sun", "woman", "moon", "the goddess", "beauty", "lover", "servant", "chap", "wife"],
	"wordCwords" : ["day", "night", "morning", "evening", "dawn", "winter", "summer", "equinox"],
	"wordDwords" : ["music", "peace", "miracle", "delight", "light", "sorrow", "art", "dream", "justice", "philsophy", "ideology", "consideration", "compassion", "passion"],
	"WordEwords" : ["tears", "crumb", "coffee", "stone", "ash", "seed", "dollars", "bullets", "wire", "air", "roots"],
	"wordFwords" : ["good", "long", "tempered", "fast", "slurred", "obscured", "whispered", "warm"]
}
var grammar = tracery.createGrammar(grammarObj)
// var line = 0;
// var loops = 0;
function generate(){
	// if (loops < 6) {
		var t = grammar.flatten("#origin#");
		$('body').append("<h1>"+t+"</h1>");
		// line += 1;
		//console.log(line);
		//if (line == 6) {
		//	loops += 1;
		//	line = 0;
};


</script>